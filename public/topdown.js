!function t(n,e,r){function o(s,c){if(!e[s]){if(!n[s]){var u="function"==typeof require&&require;if(!c&&u)return u(s,!0);if(i)return i(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var l=e[s]={exports:{}};n[s][0].call(l.exports,function(t){var e=n[s][1][t];return o(e?e:t)},l,l.exports,t,n,e,r)}return e[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,n,e){"use strict";var r=t("./src/client/Render.js"),o=t("./src/client/Controls.js"),i=t("./src/client/Network.js"),s=t("./src/client/Client.js"),c=s(r(document),o(window,document),i());c.connect(window.location.protocol+"//"+window.location.host)},{"./src/client/Client.js":5,"./src/client/Controls.js":6,"./src/client/Network.js":7,"./src/client/Render.js":8}],2:[function(t,n,e){function r(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function o(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}function i(t,n){return function(e){return t(n(e))}}function s(t,n){var e=U(t)||v(t)?o(t.length,String):[],r=e.length,i=!!r;for(var s in t)!n&&!S.call(t,s)||i&&("length"==s||h(s,r))||e.push(s);return e}function c(t,n,e){var r=t[n];S.call(t,n)&&y(r,e)&&(void 0!==e||n in t)||(t[n]=e)}function u(t){if(!d(t))return L(t);var n=[];for(var e in Object(t))S.call(t,e)&&"constructor"!=e&&n.push(e);return n}function a(t,n){return n=P(void 0===n?t.length-1:n,0),function(){for(var e=arguments,o=-1,i=P(e.length-n,0),s=Array(i);++o<i;)s[o]=e[n+o];o=-1;for(var c=Array(n+1);++o<n;)c[o]=e[o];return c[n]=s,r(t,this,c)}}function l(t,n,e,r){e||(e={});for(var o=-1,i=n.length;++o<i;){var s=n[o],u=r?r(e[s],t[s],s,e,t):void 0;c(e,s,void 0===u?t[s]:u)}return e}function f(t){return a(function(n,e){var r=-1,o=e.length,i=o>1?e[o-1]:void 0,s=o>2?e[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,s&&p(e[0],e[1],s)&&(i=o<3?void 0:i,o=1),n=Object(n);++r<o;){var c=e[r];c&&t(n,c,r,i)}return n})}function h(t,n){return n=null==n?C:n,!!n&&("number"==typeof t||O.test(t))&&t>-1&&t%1==0&&t<n}function p(t,n,e){if(!x(e))return!1;var r=typeof n;return!!("number"==r?g(e)&&h(n,e.length):"string"==r&&n in e)&&y(e[n],t)}function d(t){var n=t&&t.constructor,e="function"==typeof n&&n.prototype||I;return t===e}function y(t,n){return t===n||t!==t&&n!==n}function v(t){return w(t)&&S.call(t,"callee")&&(!A.call(t,"callee")||_.call(t)==j)}function g(t){return null!=t&&F(t.length)&&!m(t)}function w(t){return k(t)&&g(t)}function m(t){var n=x(t)?_.call(t):"";return n==E||n==N}function F(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=C}function x(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function k(t){return!!t&&"object"==typeof t}function b(t){return g(t)?s(t):u(t)}var C=9007199254740991,j="[object Arguments]",E="[object Function]",N="[object GeneratorFunction]",O=/^(?:0|[1-9]\d*)$/,I=Object.prototype,S=I.hasOwnProperty,_=I.toString,A=I.propertyIsEnumerable,L=i(Object.keys,Object),P=Math.max,T=!A.call({valueOf:1},"valueOf"),U=Array.isArray,D=f(function(t,n){if(T||d(n)||g(n))return void l(n,b(n),t);for(var e in n)S.call(n,e)&&c(t,e,n[e])});n.exports=D},{}],3:[function(t,n,e){"use strict";n.exports={lshift:16,space:32,up:38,down:40,left:37,right:39,q:81,w:87,e:69,r:82,t:0,y:0,u:0,i:76,o:79,p:80,a:65,s:83,d:68,f:0,g:0,h:0,j:0,k:0,l:76,z:90,x:88,c:67,v:0,b:0,n:0,m:0,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57}},{}],4:[function(t,n,e){"use strict";var r=t("../util/Factory").Build,o=function(){};o.DEFAULT_STROKE="#FFFFFF",o.DEFAULT_FILL="#FFFFFF",o.prototype.el=void 0,o.prototype.setWidth=function(t){this.el.width=t},o.prototype.setHeight=function(t){this.el.height=t},o.prototype.ctx=function(){return this.el.getContext("2d")},o.prototype.setStrokeStyle=function(t){this.ctx().strokeStyle=t},o.prototype.setFillStyle=function(t){this.ctx().fillStyle=t},o.prototype.draw=function(t){for(var n=0;n<t.length;n++){var e=t[n].points;this.renderShape(e,"#FFFFFF","#FFFFFF")}},o.prototype.renderShape=function(t,n,e){e||(e=o.DEFAULT_STROKE),n||(n=o.DEFAULT_FILL),this.setStrokeStyle(e),this.setFillStyle(n);var r=this.ctx();r.beginPath();for(var i=0;i<t.length;i++){var s=t[i],c=i?r.lineTo:r.moveTo;c.call(r,s[0],s[1])}r.closePath(),r.fill(),r.stroke()},o.prototype.clear=function(){this.ctx().clearRect(0,0,this.el.width,this.el.height)},n.exports=r(o,function(t){return{el:t}})},{"../util/Factory":10}],5:[function(t,n,e){"use strict";var r=t("../util/Factory").Build,o=function(){};o.prototype.render=void 0,o.prototype.controls=void 0,o.prototype.network=void 0,o.prototype.connect=function(t){this.network.connect(t),this.setupRenderer(),this.setupControls()},o.prototype.setupControls=function(){var t=this.network,n=this.controls;t.on("setControls",function(t){n.configure(t)}),n.keystream.onValue(function(n){t.emit("keystream",n)})},o.prototype.setupRenderer=function(){var t=this.network,n=this.render;t.on("addCanvas",function(t){n.addLayer(t)}),t.on("render",function(t){var e=n.getLayer(t.canvas);n.refresh(),e.draw(t.data)})},n.exports=r(o,function(t,n,e){var r={render:t,controls:n,network:e};return r})},{"../util/Factory":10}],6:[function(t,n,e){"use strict";var r=t("lodash"),o=t("kefir"),i=t("../graphics/Point"),s=function(t,n){var e=this,s={};t.onkeydown=function(t){var n=e.config;n&&!r.includes(r.values(n),t.which)||(s[t.which]=!0)},t.onkeyup=function(t){delete s[t.which]};var c=o.fromPoll(30,function(){return r.keys(s).map(function(t){return parseInt(t,10)})});this.__defineGetter__("keystream",function(){return c.skipDuplicates(function(t,n){return 0==r.xor(t,n).length}).throttle(100)});var u=i(0,0);t.onmousemove=function(t){u=i(t.offsetX,t.offsetY)},this.__defineGetter__("mouse",function(){return u}),n.oncontextmenu=r.constant(!1)};s.prototype.config=void 0,s.prototype.configure=function(t){this.config=t};var c=function(t,n){return new s(t,n)};c.Constructor=s,c.Keymap=t("../Keymap"),n.exports=c},{"../Keymap":3,"../graphics/Point":9,kefir:"kefir",lodash:"lodash"}],7:[function(t,n,e){"use strict";var r=t("lodash").bind,o=t("socket.io-client"),i=t("../util/Factory").Build,s=function(){};s.prototype.socket=void 0,s.prototype.config={transports:["websocket"],"force new connection":!0},s.prototype.connect=function(t){return this.socket=o.connect(t,this.config),this},s.prototype.on=function(t,n){return this.socket&&this.socket.on(t,r(n,this)),this},s.prototype.emit=function(t,n){this.socket&&this.socket.emit(t,n)};var c=i(s);n.exports=c},{"../util/Factory":10,lodash:"lodash","socket.io-client":"socket.io-client"}],8:[function(t,n,e){"use strict";var r=t("lodash"),o=t("./Canvas"),i=function(t){this.document=t,this.layers={}};i.prototype.addLayer=function(t){var n=this.document.getElementsByTagName("body")[0],e=this.document.createElement("canvas");e.id=t,n.appendChild(e),this.layers[t]=o(e)},i.prototype.refresh=function(){var t=this.getViewport();r.each(this.layers,function(n){n.setWidth(t.width),n.setHeight(t.height),n.clear()})},i.prototype.getViewport=function(){var t=this.document.documentElement,n={};return n.width=t.clientWidth,n.height=t.clientHeight,n},i.prototype.getLayer=function(t){return this.layers[t]};var s=function(t){return new i(t)};s.Constructor=i,n.exports=s},{"./Canvas":4,lodash:"lodash"}],9:[function(t,n,e){"use strict";function r(t){return 0==t&&1/t!==Number.POSITIVE_INFINITY}var o=t("lodash"),i=t("../util/Factory").Build,s=function(){};s.prototype.x=0,s.prototype.y=0,s.prototype.shift=function(t,n){if(o.isNumber(t)&&o.isNumber(n))this.x+=t,this.y+=n;else{if(!(t instanceof s&&o.isUndefined(n)))throw new Error("Invalid arguments passed to point.shift");this.x+=t.x,this.y+=t.y}return this},s.prototype.invert=function(){return 0!==this.x&&(this.x*=-1),0!==this.y&&(this.y*=-1),this},s.prototype.rotate=function(t,n){if(o.isUndefined(n)){if(!o.isNumber(t))throw new Error("Invalid arguments passed to point.rotate");n=t,t=c(0,0)}if(!o.isNumber(n))throw new Error("Invalid arguments passed to point.rotate");if(o.isArray(t)&&(t=c(t)),!1==t instanceof s)throw new Error("Invalid arguments passed to point.rotate");var e=n*(Math.PI/180),r=Math.cos(e),i=Math.sin(e),u={};u.x=this.x-t.x,u.y=this.y-t.y;var a={x:u.x*r-u.y*i,y:u.x*i+u.y*r};this.x=Number((a.x+t.x).toFixed(12)),this.y=Number((a.y+t.y).toFixed(12)),this.clean()},s.prototype.clean=function(){r(this.x)&&(this.x=0),r(this.y)&&(this.y=0)};var c=i(s,function(t,n){if(arguments.length>2)throw new Error("Point was passed invalid arguments");if(o.isNumber(t)&&o.isUndefined(n))throw new Error("Point was passed invalid arguments");var e={};if(!n&&o.isArray(t)){if(2!=t.length)throw new Error("Point was passed invalid arguments");e.x=t[0],e.y=t[1]}else o.isNumber(t)&&o.isNumber(n)&&(e.x=t,e.y=n);return e});c.Clone=function(t){if(t instanceof s)return c(t.x,t.y);throw new Error("Point.Clone must be passed an instance of Point")},c.Add=function(t,n){return c.Clone(t).shift(n)},c.Invert=function(t){return c.Clone(t).invert()},n.exports=c},{"../util/Factory":10,lodash:"lodash"}],10:[function(t,n,e){"use strict";var r=t("lodash.assign"),o=function(t,n){function e(){}var o=Object.create(t.prototype);e.prototype=o;var i=function(){o=Object.create(e.prototype);var i;return i=n?n.apply(null,arguments):arguments[0],r(o,i||{}),t.apply(o),o};return i.Constructor=t,i.Created=function(t){return t instanceof i.Constructor},i};n.exports={Build:o}},{"lodash.assign":2}]},{},[1]);
//# sourceMappingURL=topdown.js.map
