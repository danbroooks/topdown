!function t(n,r,e){function o(c,u){if(!r[c]){if(!n[c]){var a="function"==typeof require&&require;if(!u&&a)return a(c,!0);if(i)return i(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var f=r[c]={exports:{}};n[c][0].call(f.exports,function(t){var r=n[c][1][t];return o(r?r:t)},f,f.exports,t,n,r,e)}return r[c].exports}for(var i="function"==typeof require&&require,c=0;c<e.length;c++)o(e[c]);return o}({1:[function(t,n,r){"use strict";var e=t("./src/client/Render.js"),o=t("./src/client/Controls.js"),i=t("./src/client/Network.js"),c=t("./src/client/Client.js"),u=c(e(document),o(window,document),i());u.connect(window.location.protocol+"//"+window.location.host)},{"./src/client/Client.js":5,"./src/client/Controls.js":6,"./src/client/Network.js":7,"./src/client/Render.js":8}],2:[function(t,n,r){function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}function o(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e}function i(t,n){return function(r){return t(n(r))}}function c(t,n){var r=q(t)||y(t)?o(t.length,String):[],e=r.length,i=!!e;for(var c in t)!n&&!_.call(t,c)||i&&("length"==c||h(c,e))||r.push(c);return r}function u(t,n,r){var e=t[n];_.call(t,n)&&v(e,r)&&(void 0!==r||n in t)||(t[n]=r)}function a(t){if(!p(t))return S(t);var n=[];for(var r in Object(t))_.call(t,r)&&"constructor"!=r&&n.push(r);return n}function s(t,n){return n=T(void 0===n?t.length-1:n,0),function(){for(var r=arguments,o=-1,i=T(r.length-n,0),c=Array(i);++o<i;)c[o]=r[n+o];o=-1;for(var u=Array(n+1);++o<n;)u[o]=r[o];return u[n]=c,e(t,this,u)}}function f(t,n,r,e){r||(r={});for(var o=-1,i=n.length;++o<i;){var c=n[o],a=e?e(r[c],t[c],c,r,t):void 0;u(r,c,void 0===a?t[c]:a)}return r}function l(t){return s(function(n,r){var e=-1,o=r.length,i=o>1?r[o-1]:void 0,c=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,c&&d(r[0],r[1],c)&&(i=o<3?void 0:i,o=1),n=Object(n);++e<o;){var u=r[e];u&&t(n,u,e,i)}return n})}function h(t,n){return n=null==n?F:n,!!n&&("number"==typeof t||E.test(t))&&t>-1&&t%1==0&&t<n}function d(t,n,r){if(!x(r))return!1;var e=typeof n;return!!("number"==e?g(r)&&h(n,r.length):"string"==e&&n in r)&&v(r[n],t)}function p(t){var n=t&&t.constructor,r="function"==typeof n&&n.prototype||I;return t===r}function v(t,n){return t===n||t!==t&&n!==n}function y(t){return m(t)&&_.call(t,"callee")&&(!A.call(t,"callee")||P.call(t)==O)}function g(t){return null!=t&&b(t.length)&&!w(t)}function m(t){return k(t)&&g(t)}function w(t){var n=x(t)?P.call(t):"";return n==C||n==N}function b(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=F}function x(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function k(t){return!!t&&"object"==typeof t}function j(t){return g(t)?c(t):a(t)}var F=9007199254740991,O="[object Arguments]",C="[object Function]",N="[object GeneratorFunction]",E=/^(?:0|[1-9]\d*)$/,I=Object.prototype,_=I.hasOwnProperty,P=I.toString,A=I.propertyIsEnumerable,S=i(Object.keys,Object),T=Math.max,U=!A.call({valueOf:1},"valueOf"),q=Array.isArray,L=l(function(t,n){if(U||p(n)||g(n))return void f(n,j(n),t);for(var r in n)_.call(n,r)&&u(t,r,n[r])});n.exports=L},{}],3:[function(t,n,r){"use strict";n.exports={lshift:16,space:32,up:38,down:40,left:37,right:39,q:81,w:87,e:69,r:82,t:0,y:0,u:0,i:76,o:79,p:80,a:65,s:83,d:68,f:0,g:0,h:0,j:0,k:0,l:76,z:90,x:88,c:67,v:0,b:0,n:0,m:0,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57}},{}],4:[function(t,n,r){"use strict";var e="#FFFFFF",o="#FFFFFF";n.exports=function(t){var n=t.getContext("2d"),r=function(n){return t.width=n},i=function(n){return t.height=n},c=function(t,r,i){n.strokeStyle=i||e,n.fillStyle=r||o,n.beginPath();for(var c=0;c<t.length;c++){var u=t[c];(c?n.lineTo:n.moveTo).call(n,u[0],u[1])}n.closePath(),n.fill(),n.stroke()},u=function(){return n.clearRect(0,0,t.width,t.height)};return Object.freeze({setWidth:r,setHeight:i,renderShape:c,clear:u})}},{}],5:[function(t,n,r){"use strict";n.exports=function(t,n,r){var e=function(e){r.connect(e),r.on("addCanvas",t.addLayer),r.on("render",t.draw),r.on("setControls",n.configure),n.keystream.onValue(function(t){r.emit("keystream",t)})};return Object.freeze({connect:e})}},{}],6:[function(t,n,r){"use strict";var e=t("lodash"),o=t("kefir"),i=t("../graphics/Point"),c=function(t,n){var r=this,c={};t.onkeydown=function(t){var n=r.config;n&&!e.includes(e.values(n),t.which)||(c[t.which]=!0)},t.onkeyup=function(t){delete c[t.which]};var u=o.fromPoll(30,function(){return e.keys(c).map(function(t){return parseInt(t,10)})});this.__defineGetter__("keystream",function(){return u.skipDuplicates(function(t,n){return 0==e.xor(t,n).length}).throttle(100)});var a=i(0,0);t.onmousemove=function(t){a=i(t.offsetX,t.offsetY)},this.__defineGetter__("mouse",function(){return a}),n.oncontextmenu=e.constant(!1)};c.prototype.config=void 0,c.prototype.configure=function(t){this.config=t};var u=function(t,n){return new c(t,n)};u.Constructor=c,u.Keymap=t("../Keymap"),n.exports=u},{"../Keymap":3,"../graphics/Point":9,kefir:"kefir",lodash:"lodash"}],7:[function(t,n,r){"use strict";var e=t("lodash").bind,o=t("socket.io-client"),i=t("../util/Factory").Build,c=function(){};c.prototype.socket=void 0,c.prototype.config={transports:["websocket"],"force new connection":!0},c.prototype.connect=function(t){return this.socket=o.connect(t,this.config),this},c.prototype.on=function(t,n){return this.socket&&this.socket.on(t,e(n,this)),this},c.prototype.emit=function(t,n){this.socket&&this.socket.emit(t,n)};var u=i(c);n.exports=u},{"../util/Factory":10,lodash:"lodash","socket.io-client":"socket.io-client"}],8:[function(t,n,r){"use strict";var e=t("lodash"),o=t("./Canvas"),i=function(t){this.document=t,this.layers={}};i.prototype.draw=function(t){this.refresh();for(var n=this.getLayer(t.canvas),r=t.data,e=0;e<r.length;e++)n.renderShape(r[e].points)},i.prototype.addLayer=function(t){var n=this.document.getElementsByTagName("body")[0],r=this.document.createElement("canvas");r.id=t,n.appendChild(r),this.layers[t]=o(r)},i.prototype.refresh=function(){var t=this.getViewport();e.each(this.layers,function(n){n.setWidth(t.width),n.setHeight(t.height),n.clear()})},i.prototype.getViewport=function(){var t=this.document.documentElement,n={};return n.width=t.clientWidth,n.height=t.clientHeight,n},i.prototype.getLayer=function(t){return this.layers[t]};var c=function(t){return new i(t)};c.Constructor=i,n.exports=c},{"./Canvas":4,lodash:"lodash"}],9:[function(t,n,r){"use strict";var e=t("lodash"),o=function(t){return 0==t&&1/t!==Number.POSITIVE_INFINITY},i=function(t){return o(t)?0:t},c=function t(n,r){var o="Point was passed invalid arguments";if(e.isUndefined(r)){if(e.isUndefined(n))return t(0,0);if(e.isArray(n)&&2==n.length)return t(n[0],n[1]);if(t.validate(n))return t(n.x,n.y);throw new Error(o)}if(!t.validate({x:n,y:r}))throw new Error(o);n=i(n),r=i(r);var c=function(o,i){if(e.isNumber(o)&&e.isNumber(i))return t(n+o,r+i);if(t.validate(o)&&e.isUndefined(i))return t(n+o.x,r+o.y);throw new Error("Invalid arguments passed to point.shift")},u=function(){return 0!==n&&(n*=-1),0!==r&&(r*=-1),t(n,r)},a=function o(i,c){if(e.isUndefined(c)){if(!e.isNumber(i))throw new Error("Invalid arguments passed to point.rotate");return o(t(0,0),i)}if(!e.isNumber(c))throw new Error("Invalid arguments passed to point.rotate");if(e.isArray(i))return o(t(i),c);if(!t.validate(i))throw new Error("Invalid arguments passed to point.rotate");var u=c*(Math.PI/180),a=Math.cos(u),s=Math.sin(u),f={};f.x=n-i.x,f.y=r-i.y;var l={x:f.x*a-f.y*s,y:f.x*s+f.y*a};return t(Number((l.x+i.x).toFixed(12)),Number((l.y+i.y).toFixed(12)))};return Object.freeze({x:n,y:r,shift:c,invert:u,rotate:a})};c.validate=function(t){return e.isObject(t)&&e.isNumber(t.x)&&e.isNumber(t.y)},n.exports=c},{lodash:"lodash"}],10:[function(t,n,r){"use strict";var e=t("lodash.assign"),o=function(t,n){function r(){}var o=Object.create(t.prototype);r.prototype=o;var i=function(){o=Object.create(r.prototype);var i;return i=n?n.apply(null,arguments):arguments[0],e(o,i||{}),t.apply(o),o};return i.Constructor=t,i.Created=function(t){return t instanceof i.Constructor},i};n.exports={Build:o}},{"lodash.assign":2}]},{},[1]);
//# sourceMappingURL=topdown.js.map
